<!doctype html>
<html lang="fr">
<head>
<meta charset=" UTF-8" />
<!-- Tries to allow fullscreen in browser -->
<meta name="viewport"
	content="minimal-ui, width=device-width, initial-scale=1">

<title>reactive-gauge demo page</title>

<script src="../lib/d3.min.js"></script>
<script src="../lib/numbro.min.js"></script>
<script src="../src/ReactiveGauge.js"></script>
<link href="../dist/ReactiveGauge.css" type="text/css" rel="stylesheet" />

<link href="css/tests.css" type="text/css" rel="stylesheet" />

</head>
<body>
	<h1>VISUAL CHECK PAGE</h1>

	<h2>Quarters of gauges</h2>
	<div>
		<span id="qgauge1" class="gauge-container"></span> <span id="qgauge2"
			class="gauge-container"> </span> <span id="qgauge3"
			class="gauge-container"> </span> <span id="qgauge4"
			class="gauge-container"> </span>
	</div>

	<h2>Halves of gauges</h2>
	<div>
		<span class="vertical-layout"> <span id="hgauge1"
			class="gauge-container"></span> <span id="hgauge2"
			class="gauge-container"></span>
		</span> 
		<span id="hgauge3" class="gauge-container gauge-vertical"></span> 
		<span id="hgauge4" class="gauge-container gauge-vertical"></span>
	</div>

	<h2>Three quarters gauges</h2>
	<div>
		<span id="tgauge1" class="gauge-container"></span> <span id="tgauge2"
			class="gauge-container"> </span> <span id="tgauge3"
			class="gauge-container"> </span> <span id="tgauge4"
			class="gauge-container"> </span>
	</div>

	<h2>Full gauges</h2>
	<div>
		<span id="fgauge" class="gauge-container"></span>
	</div>

	<h2>Random quarter gauges</h2>
	<div>
		<span id="custom-quarter-gauge1" class="gauge-container"></span> <span id="custom-quarter-gauge2"
			class="gauge-container"> </span> <span id="custom-quarter-gauge3"
			class="gauge-container"> </span> <span id="custom-quarter-gauge4"
			class="gauge-container"> </span>
	</div>

	<h2>Random halves of gauges</h2>
	<div>
		<span id="custom-half-gauge1" class="gauge-container"></span> <span id="custom-half-gauge2"
			class="gauge-container"> </span> <span id="custom-half-gauge3"
			class="gauge-container"> </span> <span id="custom-half-gauge4"
			class="gauge-container"> </span>
	</div>

	<h2>Random three quarters gauges</h2>
	<div>
		<span id="custom-three-gauge1" class="gauge-container"></span> <span id="custom-three-gauge2"
			class="gauge-container"> </span> <span id="custom-three-gauge3"
			class="gauge-container"> </span> <span id="custom-three-gauge4"
			class="gauge-container"> </span>
	</div>

	<hr>

	<h2>Gauge color</h2>
	<div>
		<figure class="example">
			<figcaption>Smooth gradient</figcaption>
			<span id="gradient-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<figcaption>Gradient on sectors</figcaption>
			<span id="sector-gradient-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<figcaption>Custom sectors (with border)</figcaption>
			<span id="custom-sectors-gauge" class="gauge-container"> </span>
		</figure>
	</div>

	<h2>Pointer styles</h2>
	<div>
		<figure class="example">
			<figcaption>Needle pointer</figcaption>
			<span id="needle-pointer-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<figcaption>Filament pointer</figcaption>
			<span id="filament-pointer-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<figcaption>Filled pointer</figcaption>
			<span id="filler-pointer-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<figcaption>Slow pointer</figcaption>
			<span id="slow-pointer-gauge" class="gauge-container"> </span>
		</figure>
	</div>

	<h2>Gauge borders</h2>
	<div>
		<figure class="example">
			<span id="without-border-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<span id="with-border-gauge" class="gauge-container"> </span>
		</figure>
	</div>

	<h2>Elements size and position</h2>
	<div>
		<figure class="example">
			<figcaption>Wide gauge</figcaption>
			<span id="wide-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<figcaption>Inner labels gauge</figcaption>
			<span id="inner-label-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<figcaption>Line gauge</figcaption>
			<span id="no-gauge" class="gauge-container"> </span>
		</figure>
	</div>


	<h2>Labels and ticks</h2>
	<div>
		<figure class="example">
			<figcaption>Custom labels</figcaption>
			<span id="custom-labels-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<figcaption>Long labels</figcaption>
			<span id="long-label-gauge" class="gauge-container"> </span>
		</figure>
		<figure class="example">
			<figcaption>Without label</figcaption>
			<span id="no-label-gauge" class="gauge-container"> </span>
		</figure>
	</div>

	<script>
		// default config for the tests
		ReactiveGauge.config.colors = 'gradient';
		ReactiveGauge.config.minAngle = 0;
		ReactiveGauge.config.maxAngle = 90;
		ReactiveGauge.config.showValue = true;
		ReactiveGauge.config.maxValue = 800;

		/**
		 * Generate configs for angles checks gauges.
		 */
		function getAngleCheckConfig(minAngle, maxAngle, otherConfig){
			var config = {
				minAngle : minAngle,
				maxAngle : maxAngle,
				minValue : minAngle,
				maxValue : maxAngle
			};

			for ( var prop in otherConfig) {
				config[prop] = otherConfig[prop];
			}
		
			return config;
		}
	

		var gauges = [];
		// quarters
		gauges.push(ReactiveGauge('#qgauge1', getAngleCheckConfig(-90, 0)));
		gauges.push(ReactiveGauge('#qgauge2', getAngleCheckConfig(0, 90)));
		gauges.push(ReactiveGauge('#qgauge3', getAngleCheckConfig(90, 180)));
		gauges.push(ReactiveGauge('#qgauge4', getAngleCheckConfig(180, 270)));

		// halves
		gauges.push(ReactiveGauge('#hgauge1', getAngleCheckConfig(-90, 90)));
		gauges.push(ReactiveGauge('#hgauge2', getAngleCheckConfig(90, 270)));
		gauges.push(ReactiveGauge('#hgauge3', getAngleCheckConfig(180, 360)));
		gauges.push(ReactiveGauge('#hgauge4', getAngleCheckConfig(0, 180)));

		// three quarters
		gauges.push(ReactiveGauge('#tgauge1', getAngleCheckConfig(-90, 180)));
		gauges.push(ReactiveGauge('#tgauge2', getAngleCheckConfig(0, 270)));
		gauges.push(ReactiveGauge('#tgauge3', getAngleCheckConfig(90, 360)));
		gauges.push(ReactiveGauge('#tgauge4', getAngleCheckConfig(180, 450)));

		//full
		gauges.push(ReactiveGauge('#fgauge', getAngleCheckConfig(0, 360)));

		// custom angles (quarters)
		gauges.push(ReactiveGauge('#custom-quarter-gauge1', getAngleCheckConfig(-80, -10)));
		gauges.push(ReactiveGauge('#custom-quarter-gauge2', getAngleCheckConfig(20, 70)));
		gauges.push(ReactiveGauge('#custom-quarter-gauge3', getAngleCheckConfig(100, 170)));
		gauges.push(ReactiveGauge('#custom-quarter-gauge4', getAngleCheckConfig(210,  230, {labelNumber : 2})));

		// custom angles (halves)
		gauges.push(ReactiveGauge('#custom-half-gauge1', getAngleCheckConfig(-80, 45)));
		gauges.push(ReactiveGauge('#custom-half-gauge2', getAngleCheckConfig(20, 130)));
		gauges.push(ReactiveGauge('#custom-half-gauge3', getAngleCheckConfig(100, 223)));
		gauges.push(ReactiveGauge('#custom-half-gauge4', getAngleCheckConfig(210, 300)));

		// custom angles (three quarters)
		gauges.push(ReactiveGauge('#custom-three-gauge1', getAngleCheckConfig(-80, 130)));
		gauges.push(ReactiveGauge('#custom-three-gauge2', getAngleCheckConfig(20, 223)));
		gauges.push(ReactiveGauge('#custom-three-gauge3', getAngleCheckConfig(100, 300)));
		gauges.push(ReactiveGauge('#custom-three-gauge4', getAngleCheckConfig(210, 390)));

		// COLORS / GRADIENTS
		gauges.push(ReactiveGauge('#gradient-gauge', {
			colors : 'gradient'
		}));
		gauges.push(ReactiveGauge('#sector-gradient-gauge', {
			colors : 'sectors'
		}));
		gauges.push(ReactiveGauge('#custom-sectors-gauge', {
			colors : [ '#FFF', '#FFF', '#FFF', '#FF7C88', '#D50000' ],
			border : true
		}));

		// BORDERS 
		gauges.push(ReactiveGauge('#without-border-gauge', {
			colors : [ '#FFF']
		}));
		gauges.push(ReactiveGauge('#with-border-gauge', {
			colors : [ '#FFF'],
			border : true
		}));

		// SIZE AND POSITION
		gauges.push(ReactiveGauge('#wide-gauge', {
			ringInset : 0,
			ringWidth : 14,
			labelInset : 8,
			pointerType : 'filament'
		}));
		gauges.push(ReactiveGauge('#inner-label-gauge', {
			ringInset : 0,
			ringWidth : 7,
			labelInset : 12,
			needleLength : 75
		}));
		gauges.push(ReactiveGauge('#no-gauge', {
			labelInset : 0,
			ringInset : 5,
			ringWidth : 0.5,
			fillerWidth : 7,
			fillerInset : 2,
			pointerType : 'filler',
			colors : false
		}));
		
		// LABELS
		gauges.push(ReactiveGauge('#no-label-gauge', {
			labelNumber : 0
		}));
		gauges.push(ReactiveGauge('#long-label-gauge', {
			labelNumber : 8,
			maxValue : 100000
		}));
		gauges.push(ReactiveGauge('#custom-labels-gauge', {
 			labelNumber : 2,
			colors : 'sectors'
		}));		

		// POINTERS 
		gauges.push(ReactiveGauge('#needle-pointer-gauge', {
			pointerType : 'needle'
		}));
		gauges.push(ReactiveGauge('#filament-pointer-gauge', {
			pointerType : 'filament'
		}));
		gauges.push(ReactiveGauge('#filler-pointer-gauge', {
			pointerType : 'filler',
			colors : false
		}));
		gauges.push(ReactiveGauge('#slow-pointer-gauge', {
			pointerSlowness : 1000
		}));

		
		// display and refresh the gauges
		var refresh = ()=>gauges.forEach(g=>{
			var config = g.getConfig();
			var range = config.maxValue - config.minValue;
			var value = config.minValue + (Math.random() * range);
			g.update(value);
		});		
		refresh();
		setInterval(refresh, 5000);

		// display gauges options on over
 		gauges.forEach(g=>{
			var cont = g.container;
 			cont.append('div')//
				.attr('class', 'gauge-config')
				.text(JSON.stringify(g.getConfig(), null, 4));
			cont.on('mouseover', ()=>{
				d3.select(d3.event.currentTarget).select('div').classed('visible', true);
			});
			cont.on('mouseout', ()=>{
				d3.select(d3.event.currentTarget).select('div').classed('visible', false);
			});
 		});
	</script>

</body>
</html>
