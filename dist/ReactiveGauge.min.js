/*!
 * ResponsiveGauge
 * version : 0.1.0
 * license : MIT
 * author : MikaÃ«l Restoux
 * 
 */
var ReactiveGaugeFactory=function(e,t){"use strict";"undefined"==typeof d3&&(d3=e),"undefined"==typeof numbro&&(numbro=t);var a=6,r=2,n=100,i=40,o=numbro(),l=function(e,t){if(void 0===this.FORMAT){if(t)var a=(this.labelMantissaMax,this.labelDecimalsMax);else var a=(this.valueMantissaMax,this.valueDecimalsMax);0===a?this.FORMAT=a+".a":this.FORMAT=NaN+new Array(a+1).join("0")+"]a"}return o.set(e).format(this.FORMAT)},s={ringInset:3,ringWidth:7,minAngle:-90,maxAngle:90,sectorsNumber:5,border:!1,pointerType:"needle",pointerSlowness:200,needleLength:90,filamentLength:2,fillerWidth:NaN,fillerInset:0,minValue:0,maxValue:10,value:0,labelNumber:NaN,labelFormater:function(e){return l.call(this,e,!0)},labelMantissaMax:4,labelDecimalsMax:0,labelInset:0,colors:!1,startColor:"#ffebee",endColor:"#d50000",showValue:!0,valueInset:22,valueFormater:function(e){return l.call(this,e,!1)},valueMantissaMax:4,valueDecimalsMax:0,valueUnit:""},u=function(e,t){function o(e){return e*Math.PI/180}function l(){if(isNaN(h.labelNumber)&&(h.labelNumber=h.sectorsNumber),0===h.labelNumber)return[];var e=(h.maxValue-h.minValue)/(h.labelNumber-1),t=d3.range(h.minValue,h.maxValue,e);return t.push(h.maxValue),t}function u(e){for(var t in s)h[t]=s[t];for(var t in e)h[t]=e[t],void 0===s[t]&&console.warn("Config property "+t+" is unknwon");h.FORMAT=void 0,h.labelFormater=h.labelFormater.bind(h),h.valueFormater=h.valueFormater.bind(h),M=h.maxAngle-h.minAngle,m(),A=d3.scale.linear().range([0,1]).domain([h.minValue,h.maxValue]),V=l(),h.colors.constructor===Array?(T=d3.range(h.sectorsNumber).map(function(){return 1/h.sectorsNumber}),j=function(e){var t=Math.floor(e*h.sectorsNumber);return t=Math.min(t,h.colors.length-1),h.colors[t]}):h.colors?(T="gradient"===h.colors?d3.range(i).map(function(){return 1/i}):d3.range(h.sectorsNumber).map(function(){return 1/h.sectorsNumber}),j=d3.interpolateHsl(d3.rgb(h.startColor),d3.rgb(h.endColor))):T=[1],I=d(function(e,t){var a=e*t,r=0===t?0:.5;return o(h.minAngle+a*M-r)},function(e,t){var a=e*(t+1);return o(h.minAngle+a*M)},h.ringWidth,h.ringInset),h.border&&(R=d(o(h.minAngle),o(h.maxAngle),h.ringWidth,h.ringInset)),"filler"===h.pointerType&&isNaN(h.fillerWidth)&&(h.fillerWidth=h.ringWidth,h.fillerInset=h.ringInset)}function d(e,t,a,r){return d3.svg.arc().innerRadius(x-a-r).outerRadius(x-r).startAngle(e).endAngle(t)}function c(){return void 0!==F}function f(){var e=JSON.parse(JSON.stringify(h));return Object.freeze(e),e}function m(){function e(e){return[t(n+e),t(i+e)]}function t(e){return x*Math.sin(o(e))}for(var r=a,n=h.minAngle,i=h.maxAngle,l=0,s=0,u=0,d=0,c=Math.floor(n/90),f=Math.floor(i/90),m=c;f>=m;m++)switch(m%4){case 0:u=x;break;case 1:s=x;break;case 2:d=x;break;case 3:l=x}var p=e(0),g=e(-90);l=Math.abs(Math.min(-l,p[0],p[1])),s=Math.max(s,p[0],p[1]),u=Math.abs(Math.min(-u,g[0],g[1])),d=Math.max(d,g[0],g[1]),O=l+s+2*r,C=u+d+2*r,G=u+r,q=l+r;var v=3*x+4*r;C+O>v&&(W=!0,O+=2*r,C+=2*r,G+=r,q+=r)}function p(t){u(t),y=d3.select(e).classed("wide-gauge",W),F=y.append("svg:svg").attr("class","gauge").attr("viewBox","0 0 "+O+" "+C).attr("preserveAspectRatio","xMinYMin meet");var a="translate("+q+","+G+")",n=F.append("g").attr("class","gauge-arc").attr("transform",a),i=n.selectAll("path").data(T).enter().append("path").attr("d",I);h.colors&&i.attr("fill",function(e,t){return j(e*t)}),h.border&&n.append("path").attr("fill","none").attr("class","gauge-arc-border").attr("d",R);var o=d3.svg.line().interpolate("monotone"),l=F.append("g").attr("class","gauge-pointer gauge-"+h.pointerType).attr("transform",a);if("filler"===h.pointerType)w=l.append("path");else if("needle"===h.pointerType)w=l.data([[[0,-r],[0,-h.needleLength/2]]]).append("path").attr("d",o),l.append("circle").attr("r",r);else if("filament"===h.pointerType){var s=x-h.ringInset-h.ringWidth-h.filamentLength,d=x-h.ringInset+h.filamentLength;w=l.data([[[0,-s],[0,-d]]]).append("path").attr("d",o)}F.append("g").attr("class","gauge-label").attr("transform",a).selectAll("text").data(V).enter().append("g").attr("transform",function(e){var t=A(e),a=h.minAngle+t*M;return"rotate("+a+") translate(0,"+(h.labelInset-x)+")"}).append("text").text(h.labelFormater);if(h.showValue){var c=h.valueInset,f=h.minAngle+Math.abs(M)/2;W&&(c=0,f=0);var m="translate(0, "+-c+")",p=F.append("g").attr("class","gauge-value").attr("transform",a+" rotate("+f+")").append("g").attr("transform",m+" rotate("+-f+")").append("text");N=p.append("tspan"),p.append("tspan").text(h.valueUnit).attr("class","unit").attr("x",0).attr("dy","1em")}}function g(e){if("filler"===h.pointerType){var t=d(o(h.minAngle),o(b(e)),h.fillerWidth,h.fillerInset);w.attr("d",t)}else w.transition().duration(h.pointerSlowness).ease("elastic").attr("transform","rotate("+b(e)+")")}function v(e,t){e=void 0===e?0:e,c()&&!t||p(t),g(e),h.showValue&&N.text(h.valueFormater(e))}function b(e){var t=Math.max(e,h.minValue);t=Math.min(t,h.maxValue);var a=A(t);return h.minAngle+a*M}var h={},x=n/2,M=void 0,A=void 0,N=void 0,y=void 0,F=void 0,w=void 0,I=void 0,R=void 0,V=void 0,T=void 0,j=void 0,W=!1,O=0,C=0,q=0,G=0;return p(t),v(h.value),{isRendered:c,update:v,getConfig:f,container:y}};if(u.config=s,"undefined"!=typeof module&&module.exports)module.exports=u;else{if("undefined"!=typeof requirejs)return u;this.ReactiveGauge=u}};if("undefined"!=typeof module&&module.exports){const d3=require("d3"),numbro=require("numbro");ReactiveGaugeFactory(d3,numbro)}else if("undefined"!=typeof requirejs){var protocol=document.location.protocol;protocol="file:"===protocol?"http:":protocol,requirejs.config({paths:{d3:protocol+"//cdn.jsdelivr.net/d3js/3.5.16/d3.min",numbro:protocol+"//cdnjs.cloudflare.com/ajax/libs/numbro/1.7.1/numbro.min"}}),define(["d3","numbro"],function(e,t){return ReactiveGaugeFactory(e,t)})}else ReactiveGaugeFactory.call("undefined"==typeof window?this:window);