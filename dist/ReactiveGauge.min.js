/*!
 * ResponsiveGauge
 * version : 0.1.0
 * license : MIT
 * author : MikaÃ«l Restoux
 * 
 */
var ReactiveGaugeFactory=function(e,t){"use strict";"undefined"==typeof d3&&(d3=e),"undefined"==typeof numbro&&(numbro=t);var r=6,a=2,n=100,i=40,o=numbro(),l=function(e){if(void 0===this.FORMAT)if(0===this.labelDecimalsMax)this.FORMAT=this.labelMantissaMax+".a";else{var t=new Array(this.labelDecimalsMax+1).join("0");this.FORMAT=this.labelMantissaMax+".["+t+"]a"}var t=this.FORMAT;return o.set(e).format(t)},s={ringInset:3,ringWidth:7,minAngle:-90,maxAngle:90,pointerType:"needle",pointerSlowness:200,needleLength:90,filamentLength:2,fillerWidth:NaN,fillerInset:0,minValue:0,maxValue:10,sectorsNumber:5,labelNumber:NaN,labelFormat:l,labelMantissaMax:4,labelDecimalsMax:0,labelInset:0,colors:!1,startColor:"#ffebee",endColor:"#d50000",border:!1,showValue:!1,valueInset:22,valueSuffix:""},u=function(e,t){function o(e){return e*Math.PI/180}function l(){if(isNaN(h.labelNumber)&&(h.labelNumber=h.sectorsNumber),0===h.labelNumber)return[];var e=(h.maxValue-h.minValue)/(h.labelNumber-1),t=d3.range(h.minValue,h.maxValue,e);return t.push(h.maxValue),t}function u(e){for(var t in s)h[t]=s[t];for(var t in e)h[t]=e[t],void 0==s[t]&&console.warn("Config property "+t+" is unknwon");void 0==h.FORMAT,M=h.maxAngle-h.minAngle,m(),A=d3.scale.linear().range([0,1]).domain([h.minValue,h.maxValue]),F=l(),h.colors.constructor===Array?(T=d3.range(h.sectorsNumber).map(function(){return 1/h.sectorsNumber}),j=function(e){var t=Math.floor(e*h.sectorsNumber);return t=Math.min(t,h.colors.length-1),h.colors[t]}):h.colors?(T="gradient"===h.colors?d3.range(i).map(function(){return 1/i}):d3.range(h.sectorsNumber).map(function(){return 1/h.sectorsNumber}),j=d3.interpolateHsl(d3.rgb(h.startColor),d3.rgb(h.endColor))):T=[1],R=d(function(e,t){var r=e*t;return o(h.minAngle+r*M-.5)},function(e,t){var r=e*(t+1);return o(h.minAngle+r*M)},h.ringWidth,h.ringInset),h.border&&(V=d(o(h.minAngle),o(h.maxAngle),h.ringWidth,h.ringInset)),"filler"===h.pointerType&&isNaN(h.fillerWidth)&&(h.fillerWidth=h.ringWidth,h.fillerInset=h.ringInset)}function d(e,t,r,a){return d3.svg.arc().innerRadius(x-r-a).outerRadius(x-a).startAngle(e).endAngle(t)}function c(){return void 0!==w}function f(){var e=JSON.parse(JSON.stringify(h));return Object.freeze(e),e}function m(){function e(e){return[t(n+e),t(i+e)]}function t(e){return x*Math.sin(o(e))}for(var a=r,n=h.minAngle,i=h.maxAngle,l=0,s=0,u=0,d=0,c=Math.floor(n/90),f=Math.floor(i/90),m=c;f>=m;m++)switch(m%4){case 0:u=x;break;case 1:s=x;break;case 2:d=x;break;case 3:l=x}var p=e(0),g=e(-90);l=Math.abs(Math.min(-l,p[0],p[1])),s=Math.max(s,p[0],p[1]),u=Math.abs(Math.min(-u,g[0],g[1])),d=Math.max(d,g[0],g[1]),O=l+s+2*a,C=u+d+2*a,q=u+a,S=l+a;var v=2*x+2*a;v==C&&v==O&&(W=!0)}function p(t){u(t),N=d3.select(e).classed("gauge-360",360===M),w=N.append("svg:svg").attr("class","gauge").attr("viewBox","0 0 "+O+" "+C).attr("preserveAspectRatio","xMinYMin meet");var r="translate("+S+","+q+")",n=w.append("g").attr("class","gauge-arc").attr("transform",r),i=n.selectAll("path").data(T).enter().append("path").attr("d",R);h.colors&&i.attr("fill",function(e,t){return j(e*t)}),h.border&&n.append("path").attr("fill","none").attr("class","gauge-arc-border").attr("d",V);var o=d3.svg.line().interpolate("monotone"),l=w.append("g").attr("class","gauge-pointer gauge-"+h.pointerType).attr("transform",r);if("filler"===h.pointerType)I=l.append("path");else if("needle"===h.pointerType)I=l.data([[[0,-a],[0,-h.needleLength/2]]]).append("path").attr("d",o),l.append("circle").attr("r",a);else if("filament"===h.pointerType){var s=x-h.ringInset-h.ringWidth-h.filamentLength,d=x-h.ringInset+h.filamentLength;I=l.data([[[0,-s],[0,-d]]]).append("path").attr("d",o)}w.append("g").attr("class","gauge-label").attr("transform",r).selectAll("text").data(F).enter().append("text").attr("transform",function(e){var t=A(e),r=h.minAngle+t*M,a="rotate("+r+") translate(0,"+(h.labelInset-x)+")";return W&&(a+=" scale(2,2)"),a}).text(h.labelFormat.bind(h));if(h.showValue){var c=h.valueInset,f=h.minAngle+Math.abs(M)/2,m=3;W&&(m*=2,c=0,f=0);var p="translate(0, "+-c+")",g=w.append("g").attr("class","gauge-value").attr("transform",r+" rotate("+f+")").append("text").attr("transform",p+" scale("+m+","+m+") rotate("+-f+")");y=g.append("tspan"),g.append("tspan").text(h.valueSuffix).attr("class","unit").attr("x",0).attr("dy","1em")}}function g(e){if("filler"===h.pointerType){var t=d(o(h.minAngle),o(b(e)),h.fillerWidth,h.fillerInset);I.attr("d",t)}else I.transition().duration(h.pointerSlowness).ease("elastic").attr("transform","rotate("+b(e)+")")}function v(e,t){c()&&!t||p(t),g(e),h.showValue&&y.text(h.labelFormat(e))}function b(e){var t=Math.max(e,h.minValue);t=Math.min(t,h.maxValue);var r=A(t);return h.minAngle+r*M}var h={},x=n/2,M=void 0,A=void 0,y=void 0,N=void 0,w=void 0,I=void 0,R=void 0,V=void 0,F=void 0,T=void 0,j=void 0,W=!1,O=0,C=0,S=0,q=0;return p(t),v(0),{isRendered:c,update:v,getConfig:f,container:N}};if(u.config=s,"undefined"!=typeof module&&module.exports)module.exports=u;else{if("undefined"!=typeof requirejs)return u;this.ReactiveGauge=u}};if("undefined"!=typeof module&&module.exports){const d3=require("d3"),numbro=require("numbro");ReactiveGaugeFactory(d3,numbro)}else if("undefined"!=typeof requirejs){var protocol=document.location.protocol;protocol="file:"===protocol?"http:":protocol,requirejs.config({paths:{d3:protocol+"//cdn.jsdelivr.net/d3js/3.5.16/d3.min",numbro:protocol+"//cdnjs.cloudflare.com/ajax/libs/numbro/1.7.1/numbro.min"}}),define(["d3","numbro"],function(e,t){return ReactiveGaugeFactory(e,t)})}else ReactiveGaugeFactory.call("undefined"==typeof window?this:window);